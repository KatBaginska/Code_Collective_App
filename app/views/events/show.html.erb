<div class="container mt-5">
  <div class="title-container">
    <br>
    <h1><%= @event.name %></h1>
  </div>
    <div class="event-details-card">
      <% if @event.photos.present? %>
        <div class="image-container">
          <div class="main-image">
            <%= cl_image_tag @event.photos[0].key, width: 600, height: 400, crop: :fill, class: "hero" %>
          </div>
          <div class="gallery">
            <% unless @event.photos.count == 1 %>
              <% @event.photos.each_with_index do |photo, index| %>
                <% next if index == 0 %>
                 <%= cl_image_tag photo.key, height: 196, width: 250, crop: :fill %>
                <% end %>
             <% end %>
      <% else %>
        <%= "No photo available" %>
      <% end %>
          </div>
       </div>
      <div class="details-container">
        <div class="details">
          <p><%= @event.description %></p>
          <p>Location: <%= @event.location %></p>
          <p>Hosted by <%= "#{@event.user.username}" %></p>
          <p>Keywords: #<%= "#{@event.keywords}" %></p>
          <hr>
          <p>Date: <%= @event.start_time.strftime("%A %d %B %Y") %></p>
          <p>Start time: <%= @event.start_time.strftime("%H:%M") %></p>
          <p>End time: <%= @event.end_time.strftime("%H:%M") %></p>
          <hr>
        </div>
        <div class="button-container">
          <%= link_to "Book", new_event_booking_path(@event), class: "btn btn-primary" %>
          <%= link_to events_path, class: "btn btn-secondary" do %>
          <i class="fa-solid fa-chevron-left"></i>
        <% end %>
        </div>
        <div>
          <div>
            <% if policy(@event).edit? %>
              <%= link_to 'Edit Event', edit_event_path,  class: "btn btn-primary" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="map">
      <div style="width: 100%; height: 400px;"
          data-controller="map"
          data-map-markers-value="<%= @markers.to_json %>"
          data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
</div>
