<!-- app/views/events/index.html.erb -->
<div class="banner" style="background-image: url('https://images.unsplash.com/photo-1547190027-9156686aa2f0?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'); margin-bottom: 20px;">
  <div class="container h-100">
    <div class="row align-items-center justify-content-center h-100">
      <div class="col-lg-12 text-center">
        <h2 class="search-title">Find Your New Event</h2>
        <%= form_with url: events_path, method: :get, local: true, class: "d-flex" do %>
          <div class="form-group mb-0">
            <%= text_field_tag :query, params[:query], placeholder: "Search events...", class: "form-control" %>
          </div>
          <div class="form-group mb-0">
            <%= submit_tag "Search", class: "btn btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<div class="tags-bar mt-3 mb-3 text-center">
  <% Event.tag_counts_on(:tags).each do |tag| %>
    <%= link_to tag.name, events_path(tag: tag.name), class: "btn btn-outline-primary tag-button mx-1" %>
  <% end %>
</div>

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center">
    <h2 class="mb-0">Upcoming Events</h2>
    <% if policy(Event).new? %>
      <%= link_to 'New Event', new_event_path, class: "btn btn-primary" %>
    <% end %>
  </div>
  <div class="cards-events mt-3">
    <div class="cards">
      <% @events.each do |event| %>
        <div class="card event-card">
          <%= cl_image_tag event.photos.first.key, class: "castle-image" if event.photos.attached? %>
          <div class="card-body">
            <h5 class="card-title"><%= link_to event.name, event_path(event), class: "event-link" %></h5>
            <p class="card-text"><strong>Description:</strong> <%= event.description %></p>
            <p class="card-text"><strong>Location:</strong> <%= event.location %></p>
            <p class="card-text"><strong>Date:</strong> <%= event.date %></p>
            <p class="card-text"><strong>Time:</strong> <%= event.start_time %> - <%= event.end_time %></p>
            <%= link_to "Check this event", event_path(event), class: "btn btn-primary" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
